{% load widget_tweaks %}
<!DOCTYPE HTML>
<html lang="en">

<head>
  <title> Dashboard </title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  {% include 'snippets/js.html' %}
  <!-- Bootstrap core CSS -->
  {% include 'snippets/css.html' %}
<script>
if(!!window.performance && window.performance.navigation.type == 2)
{
    window.location.reload();
}
</script>
</head>
<body onunload="">

{% include 'snippets/nav.html' %}
<!-- Page Content -->


    <div class="container-fluid">
      <div class = "row">
        <div class = "col">
            Current Channels you are member
            <br>
            {% if ch %}
            {% for chan in ch %}
            <span><a href="{% url 'room' chan %}">{{ chan }}</a></span>
            <br>
            {% endfor %}
            {% endif %}
            <button class="open-button" onclick="openForm()">Chat</button>
        </div>
        <div class = "col-6">
            <h4 class="mt-4">Hello {{ user }} to your dashboard</h4>
        </div>
        <div class = "col">
            <div class="card" style="width: 18rem;">
                <div class = "card-header">
                    Available channels
                </div>
                <ul class="list-group list-group-flush">
                    {% for val in all %}
                        <li class = "list-group-item">{{ val }} <a href="{% url 'join_room' val %}">Become a member </a></li>
                    {% endfor %}
                </ul>
            </div>
        </div>
      </div>
    
    Create a chat room here <br />
    <input id="room-name-input" type="text" size="25" />
    <input id="room-name-submit" type="button" value="Enter" /></p>

    <script>
        document.querySelector('#room-name-input').focus();
        document.querySelector('#room-name-input').onkeyup = function(e) {
            if (e.keyCode === 13) {  // enter, return
                document.querySelector('#room-name-submit').click();
            }
        };

        document.querySelector('#room-name-submit').onclick = function(e) {
            var roomName = document.querySelector('#room-name-input').value;
            window.location.pathname = 'medico/channel_create/' + roomName + '/';
        };
    </script>

<div class="footer">
  =========================
</div>
</body>
</html>
